name: Docker Image CI

on:
  workflow_run:
    workflows: ["CI Node App"]
    types:
      - completed

jobs:
  Build_Docker_Image:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    - name: Build the Docker image
      run: |
          cd Pass-List-App
          docker build . --file dockerFile_2 --tag students.azurecr.io/axity-app:$(date +%s)
    - name: Check 4 Image
      run: docker images
      
    - name: Push Image to ACR
      uses: julioarruda/pushimagetoregistry@v1
      with:
        acr-tokenname: token-access
        acr-token: bP3ih5XtpZ+hnFS//RlOHJBMbspr/U15r7dKyL/0If+ACRCrJW6U
        acr-account: students.azurecr.io
        acr-imagename: students.azurecr.io/axity-app:$(date +%s)
